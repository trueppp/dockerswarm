version: '3.1'
services:
  zwavejs2mqtt:
    container_name: zwavejs2mqtt
    image: zwavejs/zwavejs2mqtt:latest
    restart: always
    tty: true
    stop_signal: SIGINT
    environment:
      - SESSION_SECRET=mysupersecretkey
      - TZ=America/Toronto  # uncomment and edit to match you timezone if you want logs time and dates to match your timezone instead of UTC.
    networks:
      - zwave
    devices:
      - '/dev/ttyACM0:/dev/ttyACM0'
    volumes:
      - zwavejs2mqtt:/usr/src/app/store
      - /dev/zwave:/dev/zwave
    ports:
      - '8091:8091' # port for web interface
      - '3000:3000' # port for zwave-js websocket server
     deploy:
       placement:
        constraints:
          - node.labels.zwave=="true"
networks:
  zwave:
  volumes:
   zwavejs2mqtt:
     name: zwavejs2mqtt
     driver: sapk/plugin-rclone
     driver_opts:
        config: "W3JlbW90ZV0NCnR5cGUgPSBkcml2ZQ0KY2xpZW50X2lkID0gMzk3Mzk4OTkzNzE5LXI4cnMwdjk0 ZTFmY2lpOTUzY2V2dHV1Y2oydDdwZm5lLmFwcHMuZ29vZ2xldXNlcmNvbnRlbnQuY29tDQpjbGll bnRfc2VjcmV0ID0gTDRSQU5QTzhRRFhhNkMzN2pMUjl6WnJhDQpzY29wZSA9IGRyaXZlLmFwcGZv bGRlcg0Kcm9vdF9mb2xkZXJfaWQgPSBhcHBEYXRhRm9sZGVyDQp0b2tlbiA9IHsiYWNjZXNzX3Rv a2VuIjoieWEyOS5hMEFmSDZTTURZSENDYnByQ296Zy13WDQ1RGlIN05NZU5mN2hvWUtldFJ6TFlm M3o2ZFJ2b2tfTEFMdjVURW1rUHZEdi1rRnEzanZQeHVXRnZRQW9keFh4Yld5N3RVbVdaX1hITkV3 b29PNnRhdjNnQWFvQ2Z6ZGhCVGZQUDJaWUhxZ3NpNGhLREUtVnBhQnM0RlN4NFhYZnBMNnd2U1Bq SSIsInRva2VuX3R5cGUiOiJCZWFyZXIiLCJyZWZyZXNoX3Rva2VuIjoiMS8vMGRPVFpWbHk0TGVy cUNnWUlBUkFBR0EwU053Ri1MOUlyYzVtSUNpRDNxdW9TbElDTkg1clJ4SnloaFl2VmM4dFdycFU5 dTJvdzB2SVFyblR3dGlmZW9lLWRfck5Ga01WZHoxRSIsImV4cGlyeSI6IjIwMjEtMDUtMThUMTE6 MDc6MTQuNzAwNzEwNi0wNDowMCJ9DQoNCltNZWRpYV0NCnR5cGUgPSBjcnlwdA0KcmVtb3RlID0g cmVtb3RlOlxNZWRpYQ0KZmlsZW5hbWVfZW5jcnlwdGlvbiA9IHN0YW5kYXJkDQpkaXJlY3Rvcnlf bmFtZV9lbmNyeXB0aW9uID0gdHJ1ZQ0KcGFzc3dvcmQgPSB5LVY0YjRmUUZNSDd0LWVYb01Sb01T Rk1aejVFeVhwNmZELXRzOFhCUjdNZA0KcGFzc3dvcmQyID0gdlRhbnVoUGRMVENxTlcxRV9IR1Vw Z3ZsQUlyMHFET3duem05bFFPd2E4Q0t6UVAxSkgwMklkQno1b2pxUDBCbGt1SDFxcUhwUC1EQl9F N2NwYmQzMlFpaHVzdnBFUVhhcUZ5LUJMRDFIWFpTQXdNZk53NGRCbHZORzBVRjR2cjZYaThVRlBQ ZUMydEdXY3dfSjRlNGJOV1lENmVVTVBNX1o0RUNPVnVIYm1rTHNfa0NGeExRSDBHdWxzRUV2UFZt d2ptQzk3STJpQmZUbFdDTldBS05hZ1dGUkx3cm8wZkdCYnlXYnk1VmpaTGpvcWJLM01rNWVyeDVj UQ0Kc3RvcF9vbl91cGxvYWRfbGltaXQgPSB0cnVlDQoNCltsb2NhbF0NCnR5cGUgPSBsb2NhbA0K bm91bmMgPSBmYWxzZQ0KDQpbdHZ1bmlvbl0NCnR5cGUgPSB1bmlvbg0KdXBzdHJlYW1zID0gbG9j YWw6Zzpcc2hhcmVzXFRWIE1lZGlhOlxUVlwNCmFjdGlvbl9wb2xpY3kgPSBlcGFsbA0KY3JlYXRl X3BvbGljeSA9IGZmDQpzZWFyY2hfcG9saWN5ID0gZmYNCg0KW21vdmlldW5pb25dDQp0eXBlID0g dW5pb24NCnVwc3RyZWFtcyA9IGxvY2FsOmc6XHNoYXJlc1xNb3ZpZXMgTWVkaWE6XE1vdmllc1wN CmFjdGlvbl9wb2xpY3kgPSBlcGFsbA0KY3JlYXRlX3BvbGljeSA9IGZmDQpzZWFyY2hfcG9saWN5 ID0gZmYNCg0K"
        args: "--fast-list --uid 1000 --gid 1000 --allow-root --allow-other --vfs-cache-mode full"
        remote: "remote:swarm/zwave2mqtt/"
        
